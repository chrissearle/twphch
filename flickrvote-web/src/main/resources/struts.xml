<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="flickrVote" extends="struts-default" namespace="/">
        <interceptors>
            <interceptor name="flickrLinkInterceptor"
                         class="net.chrissearle.flickrvote.web.interceptors.FlickrLinkInterceptor"/>

            <interceptor name="challengeListInterceptor"
                         class="net.chrissearle.flickrvote.web.interceptors.ChallengeListInterceptor"/>

            <interceptor name="votingChallengeInterceptor"
                         class="net.chrissearle.flickrvote.web.interceptors.VotingChallengeInterceptor"/>

            <interceptor-stack name="flickrVoteStack">
                <interceptor-ref name="flickrLinkInterceptor"/>
                <interceptor-ref name="votingChallengeInterceptor"/>
                <interceptor-ref name="challengeListInterceptor"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>

        </interceptors>

        <default-interceptor-ref name="flickrVoteStack"/>

        <action name="current" class="net.chrissearle.flickrvote.web.CurrentChallengeAction">
            <result>/jsp/current.jspx</result>
        </action>
        <action name="show" class="net.chrissearle.flickrvote.web.ShowChallengeAction">
            <result>/jsp/show.jspx</result>
        </action>
        <action name="frob" class="net.chrissearle.flickrvote.web.FlickrCallbackAction">
            <result type="redirectAction">current</result>
        </action>
        <action name="test" class="net.chrissearle.flickrvote.web.TestAction">
            <result>/jsp/test.jspx</result>
        </action>
    </package>

    <package name="flickrChart" extends="jfreechart-default" namespace="/chart">
        <action name="testchart" class="net.chrissearle.flickrvote.web.chart.TestChartAction">
            <result name="success" type="chart">
                <param name="value">chart</param>
                <param name="type">png</param>
                <param name="width">640</param>
                <param name="height">480</param>
            </result>
        </action>

        <action name="challengeVotes" class="net.chrissearle.flickrvote.web.chart.ChallengeVotesAction">
            <result name="success" type="chart">
                <param name="value">chart</param>
                <param name="type">png</param>
                <param name="width">500</param>
                <param name="height">300</param>
            </result>
        </action>
    </package>

    <package name="flickrVoteAdmin" extends="struts-default" namespace="/admin">

        <action name="index" class="net.chrissearle.flickrvote.web.admin.IndexAction">
            <result>/jsp/admin/index.jspx</result>
        </action>

        <action name="challenges" class="net.chrissearle.flickrvote.web.admin.ChallengesAction">
            <result>/jsp/admin/challenges.jspx</result>
        </action>

        <action name="getPhotographer" class="net.chrissearle.flickrvote.web.admin.RetrievePhotographerAction">
            <result>/jsp/admin/index.jspx</result>
        </action>

        <action name="getImage" class="net.chrissearle.flickrvote.web.admin.RetrieveImageAction">
            <result>/jsp/admin/index.jspx</result>
        </action>
    </package>
</struts>
